<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Gold Prototype</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@google/generative-ai@0.1.0/dist/index.js"></script>
</head>

<body class="bg-slate-950 text-white font-sans">

  <nav class="p-4 bg-slate-900 flex justify-between items-center border-b border-slate-800">
    <h1 class="text-yellow-400 font-bold text-lg">ðŸŸ¡ Digital Gold</h1>
    <p class="text-sm font-mono text-slate-400">â‚¹16666 / gram</p>
  </nav>

  <div class="max-w-md mx-auto p-4 space-y-6">

    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-xl">
      <h2 class="text-slate-400 text-sm font-medium uppercase mb-1">Live Gold Price</h2>
      <p class="text-3xl text-yellow-400 font-bold mb-6">â‚¹16,666 <span class="text-sm font-normal text-slate-500">/ g</span></p>
      
      <label class="text-xs text-slate-400 uppercase">Amount in INR</label>
      <input
        id="amount"
        type="number"
        placeholder="Enter amount â‚¹"
        class="w-full p-3 mt-1 bg-slate-800 rounded-lg text-white border border-slate-700 focus:outline-none focus:border-yellow-400"
        oninput="updateGrams(this.value)"
      >

      <p class="mt-4 text-sm text-slate-400 text-center">
        You get: <span id="grams" class="text-yellow-400 font-bold">0.0000</span> grams
      </p>

      <button onclick="alert('Purchase processing...')" class="mt-4 w-full bg-yellow-400 hover:bg-yellow-500 text-black p-3 rounded-lg font-bold transition-transform active:scale-95">
        Buy Gold Now
      </button>
    </div>

    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
      <h2 class="font-semibold flex items-center gap-2 mb-4">ðŸ¤– AI Gold Assistant</h2>

      <textarea id="prompt" placeholder="Ask me about gold investments..."
        class="w-full p-3 bg-slate-800 rounded-lg text-white border border-slate-700 focus:outline-none focus:border-blue-500 min-h-[100px] text-sm"></textarea>

      <button id="ai-btn" onclick="askAI()"
        class="mt-3 w-full bg-blue-600 hover:bg-blue-700 p-3 rounded-lg font-semibold transition-all">
        Ask Gemini
      </button>

      <div id="ai-status" class="mt-4 text-xs font-mono text-blue-400 hidden"></div>
      <div id="response" class="mt-2 text-sm text-slate-300 leading-relaxed bg-slate-950 p-3 rounded hidden"></div>
    </div>

  </div>

  <script>
    // Constants
    const GOLD_RATE = 16666;
    // IMPORTANT: Paste your real key here!
    const API_KEY = "AIzaSyCKQzuD51qDVH1slE75aBpcHmwtSpclxCw"; 

    // 1. Calculate Grams Logic
    function updateGrams(val) {
      const display = document.getElementById("grams");
      if (val > 0) {
        display.innerText = (val / GOLD_RATE).toFixed(4);
      } else {
        display.innerText = "0.0000";
      }
    }

    // 2. AI Logic
    async function askAI() {
      const promptInput = document.getElementById("prompt");
      const status = document.getElementById("ai-status");
      const responseBox = document.getElementById("response");
      const btn = document.getElementById("ai-btn");

      const userText = promptInput.value.trim();
      if (!userText) return alert("Please enter a question!");

      // UI Loading State
      status.classList.remove("hidden");
      responseBox.classList.remove("hidden");
      status.innerText = "Connecting to Google AI...";
      responseBox.innerText = "Thinking...";
      btn.disabled = true;
      btn.style.opacity = "0.5";

      try {
        // Initialize the library from the window object
        const genAI = new window.GoogleGenerativeAI.GoogleGenerativeAI("AIzaSyCKQzuD51qDVH1slE75aBpcHmwtSpclxCw");
        const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

        const result = await model.generateContent(userText);
        const response = await result.response;
        const text = response.text();

        status.innerText = "Response Received:";
        responseBox.innerText = text;
      } catch (error) {
        console.error("AI Error:", error);
        status.innerText = "Error Occurred";
        responseBox.innerHTML = `<span class="text-red-400">${error.message}</span>`;
      } finally {
        btn.disabled = false;
        btn.style.opacity = "1";
      }
    }
  </script>
</body>
</html>
